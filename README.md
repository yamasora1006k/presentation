# Presentation Trainer

1台のPCでプレゼン練習を完結させるWebアプリケーション。画面キャプチャとWebカメラを合成表示し、ドラッグ移動や録画が可能です。

## 機能

### 必須機能（MVP）

#### 1. 画面キャプチャ表示
- PCの画面・ウィンドウ・タブを取得してページ内に表示
- ブラウザ標準の `getDisplayMedia` API を使用
- 画面キャプチャ領域はページ全面にフィット（アスペクト比を維持）

#### 2. カメラ表示（自分の顔）
- Webカメラを取得して小窓表示
- `getUserMedia` API を使用
- 初期位置：左下（余白あり）

#### 3. 顔小窓の移動（ドラッグ）
- 顔小窓をクリック&ドラッグで移動可能
- 画面外に完全に出ないよう制限（境界内に収める）
- スムーズなドラッグ操作（フリック対応）

#### 4. サイズ変更
- 小窓サイズを3段階で切替：S（160×120）/ M（200×150）/ L（280×210）

#### 5. ミラー表示切替
- 自分の顔を「鏡（左右反転）」表示 ON/OFF

### 拡張機能

#### 6. 録画機能
- 合成された映像（画面＋顔）を1本の動画として録画
- Canvas合成による高品質な合成
- 30FPS でのスムーズな録画
- WebM形式で自動ダウンロード
- 録画タイマー表示（HH:MM:SS）

#### 7. ショートカットキー
- `Space`：録画開始/停止
- `M`：ミラー切替
- `C`：カメラON/OFF
- `S`：画面共有開始/停止
- `Esc`：UI表示/非表示

#### 8. レイアウトプリセット
- 左上 / 右上 / 左下 / 右下 のワンクリック配置
- ドラッグで自由配置も維持

#### 9. 設定保存
- 小窓位置・サイズ・ミラー設定を LocalStorage に保存
- 次回起動時に自動復元

## デザイン

**スタジオ・プロフェッショナル方針**に基づいた設計：

- **色彩**：深いチャコール背景（#1a1a1a）、シアンアクセント（#00d9ff）、オレンジアクセント（#ff6b35）
- **タイポグラフィ**：Courier Prime（見出し）+ System fonts（本文）
- **レイアウト**：ミニマリスト、機能性第一
- **インタラクション**：スムーズなアニメーション、即座なフィードバック

## 技術スタック

- **フロントエンド**：React 19 + TypeScript
- **スタイリング**：Tailwind CSS 4
- **UI コンポーネント**：shadcn/ui
- **ルーティング**：Wouter
- **メディア API**：
  - `navigator.mediaDevices.getDisplayMedia()` - 画面キャプチャ
  - `navigator.mediaDevices.getUserMedia()` - カメラアクセス
  - `Canvas.captureStream()` - 合成映像の録画
  - `MediaRecorder` - 動画保存

## 非機能要件

### ブラウザ対応
- **第一優先**：Chrome / Edge
- **制限あり**：Safari（`getDisplayMedia` の制限）
- **非対応**：Firefox（一部機能制限）

### ネットワーク
- **ローカル動作**：インターネット接続不要（静的サイト）
- **プライバシー**：映像は外部送信しない

### パフォーマンス
- **合成録画**：30FPS 目標
- **重い解像度**：画面キャプチャを 720p 相当まで落とす設定を推奨

## 制約・注意点

### セキュリティ
- `getDisplayMedia` は**ユーザー操作（ボタンクリック）**が必須
- ブラウザのセキュリティダイアログが表示される

### OS/ブラウザ依存
- 「音声キャプチャ」「タブキャプチャ」の挙動が異なる場合がある
- WebM 録画は安定しているが、MP4 は追加処理が必要

### 無限ミラー警告
- 全画面キャプチャ中に自分のサイト自身を共有すると「無限ミラー」になる可能性がある
- **推奨**：共有対象はスライドウィンドウに限定

## 使用方法

### 基本的な流れ

1. サイトを開く
2. 「画面共有開始」ボタンをクリック → 共有する画面/ウィンドウ/タブを選択
3. 「カメラON」ボタンをクリック → カメラを許可
4. 画面上に背景（共有した画面）と前景（自分の顔）が表示される
5. 顔小窓をドラッグして見やすい場所へ移動
6. （任意）「録画開始」ボタン → 練習 → 「録画停止」ボタン → WebM 動画が保存される

### ショートカット一覧

| キー | 機能 |
|------|------|
| `Esc` | UI表示/非表示 |
| `M` | ミラー切替 |
| `C` | カメラON/OFF |
| `S` | 画面共有開始/停止 |
| `Space` | 録画開始/停止 |

## 今後の拡張案

- 原稿表示（テレプロンプター）を透明で重ねる
- 「視線チェック」用にカメラ位置ガイド
- 話速（WPM）/沈黙時間の簡易分析（録画後に解析）
- MP4 形式でのエクスポート
- クラウド保存オプション

## ライセンス

MIT

## サポート

問題が発生した場合は、ブラウザのコンソール（F12）でエラーメッセージを確認してください。
